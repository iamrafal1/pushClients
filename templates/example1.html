<!DOCTYPE html>
<html>

<head>
    <title>An Article</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f1f1f1;
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
            font-size: 32px;
            font-weight: bold;
        }

        main {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
        }

        h1 {
            font-size: 28px;
            margin-top: 0;
        }

        p {
            line-height: 1.5;
            margin-bottom: 20px;
        }

        img {
            max-width: 100%;
            height: auto;
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <script type="text/javascript">

        // Create a Javascript EventSource
        var source = new EventSource("http://127.0.0.1:8080/2");

        let permission = Notification.permission;

        // Create a callback for when a new message is received.
        source.onmessage = function (e) {
            var fullData = JSON.parse(e.data);
            var data = fullData.message
            // Check permissions
            if (permission === "granted") {
                showNotification(data);
            } else if (permission === "default") {
                requestAndShowPermission(data);
            } else {
                alert("Use normal alert");
            }
        };

        function requestAndShowPermission(data) {
            Notification.requestPermission().then((result) => {
                if (result === "granted") {
                    showNotification(data);
                }
            });
        }

        function showNotification(body) {
            console.log(body)
            var title = "Push Notification";
            const notification = new Notification(title, { body });
            notification.onclick = () => {
                console.log("Do we get here?")
                notification.close();
                window.parent.focus();
            }
        }
    </script>
    <header>Some Heading</header>
    <main>
        <h1>This is an article</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, lorem et dapibus eleifend, velit nunc
            euismod arcu, id elementum mauris sapien in nisi. Praesent rhoncus, magna at volutpat pretium, nunc mauris
            pharetra lectus, ac interdum metus libero vel odio. Vestibulum blandit risus eget sem vestibulum ultrices.
        </p>
        <p>Pellentesque non ipsum neque. Nullam pharetra vitae nisi eget bibendum. Suspendisse sit amet commodo tortor.
            Nunc
            vel fringilla dolor, et lobortis nisl. Nam fermentum diam sed enim vestibulum lobortis. Integer sagittis
            aliquet
            eros, sit amet facilisis quam laoreet nec.
        </p>
        <p>
            Sed tempor dui elit, eget posuere ligula suscipit eget. Aliquam consequat justo eu magna rutrum, ut aliquet
            leo gravida.
            In vitae malesuada ipsum. Maecenas tempus eros at ante volutpat finibus. Class aptent taciti sociosqu ad
            litora torquent
            per conubia nostra, per inceptos himenaeos. Integer semper felis quis felis condimentum, id tempor eros
            dictum. Praesent
            et neque tortor.

            Pellentesque sagittis congue bibendum. Suspendisse at semper mauris, sed ultricies elit. Nulla sit amet
            vehicula lorem.
            Proin mollis sapien erat, eu porta dolor gravida eget. Vivamus velit purus, faucibus sed elit non, accumsan
            dictum
            ipsum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Morbi
            posuere nunc
            at nulla tincidunt, eget aliquet nibh eleifend.

            Suspendisse et mauris ex. Nunc lacus ante, imperdiet mollis tortor et, fermentum bibendum risus. Mauris et
            elit sit amet
            risus bibendum fermentum vitae id metus. Nulla pharetra eleifend justo viverra auctor. In et maximus elit, a
            scelerisque
            ipsum. Quisque mollis facilisis orci quis pellentesque. Ut euismod nulla quis ligula tempus, in tempor est
            rutrum.

            Morbi tempor lorem eu eleifend fermentum. Nulla eu congue tortor, in cursus nunc. Aenean volutpat nibh nec
            ullamcorper
            scelerisque. Nam lacus purus, pretium ut gravida sed, efficitur sit amet dui. Praesent lacus nibh, tincidunt
            ut laoreet
            eu, porttitor et ex. Suspendisse rhoncus enim nec metus porttitor imperdiet. Curabitur luctus, elit sit amet
            tincidunt
            faucibus, leo risus auctor libero, at efficitur nulla ligula non lorem.

            Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis scelerisque
            laoreet leo
            et tincidunt. In eget lacus nibh. Nulla eget eros faucibus, convallis sapien in, luctus sapien. Sed auctor
            ac odio sit
            amet volutpat. Curabitur non aliquam lacus. Etiam rutrum fringilla pharetra.

            In nec purus aliquet, condimentum felis nec, dictum enim. Orci varius natoque penatibus et magnis dis
            parturient montes,
            nascetur ridiculus mus. Nulla eget lectus fermentum, faucibus leo id, euismod ex. Cras mollis molestie
            magna, in tempus
            mi ullamcorper vitae. Nunc ut mauris feugiat, tempor dui id, molestie sem. Nam mattis, massa nec viverra
            tincidunt, eros
            ipsum sollicitudin felis, placerat interdum enim orci quis libero. Donec lobortis risus eget ante dapibus,
            vel rutrum
            justo tincidunt. Quisque mollis ante id odio pharetra vestibulum. Nullam in orci sollicitudin, lacinia
            tellus eget,
            tincidunt odio. Donec ex eros, egestas id nisl non, sodales viverra dolor. Quisque condimentum at nisi
            dictum efficitur.

            Mauris ut commodo ante, eget varius ante. Morbi sed hendrerit risus. Donec vitae augue in purus ornare
            feugiat id nec
            leo. Aliquam a auctor lorem. Nam placerat pulvinar massa et vehicula. Sed vitae erat at dui pharetra
            gravida. Quisque
            venenatis diam eu nibh convallis, et lacinia lorem molestie. Morbi eleifend erat non nisl tincidunt aliquam.
            Fusce vitae
            lacus aliquet, aliquet enim et, lacinia odio. Duis tincidunt enim purus, ut volutpat felis ultricies in.
            Proin vitae
            nulla ac orci viverra aliquam at et magna. Donec massa metus, maximus sed dui et, vehicula scelerisque
            nulla. Quisque et
            varius quam, nec commodo dui. Suspendisse eu sapien nec neque cursus hendrerit. Nam eu congue mauris.
            Quisque sit amet
            dictum felis.

            Pellentesque in pharetra sem. Proin malesuada tempor ipsum id tristique. Donec congue vehicula sem. Vivamus
            dapibus
            fringilla congue. Cras pulvinar nibh tortor, a congue elit tempor eu. Proin at erat tristique, accumsan mi
            id, convallis
            lacus. Donec mollis nulla tellus, id ornare dui consequat sed. Quisque nec risus lacinia, commodo est eget,
            mattis
            turpis.

            Curabitur sit amet elementum eros. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere
            cubilia
            curae; Phasellus facilisis magna quis sapien porttitor, nec varius lectus fermentum. Nunc sit amet cursus
            tortor. Nullam
            facilisis semper dolor in iaculis. Etiam a porttitor erat, non viverra dolor. In dui urna, posuere in
            scelerisque a,
            sollicitudin ac diam. Nulla varius pellentesque urna, ac scelerisque erat porta ac.

            Nullam enim felis, scelerisque sed feugiat eget, varius id elit. Nam et augue magna. Nam et ante vel tortor
            posuere
            iaculis vitae nec erat. Ut vitae tincidunt ipsum, nec sodales tortor. Quisque erat elit, sodales a nunc
            quis, malesuada
            gravida eros. Mauris justo nibh, venenatis quis blandit et, aliquam porttitor nunc. Pellentesque sit amet
            convallis
            turpis, id bibendum ipsum. Mauris aliquam, ipsum non ultricies ornare, est purus faucibus lectus, non
            aliquam magna arcu
            eget tellus. Pellentesque id mi diam. Phasellus tempor, lorem at elementum consectetur, metus dolor auctor
            sapien, eu
            aliquam odio leo a orci. Aliquam erat volutpat. Sed iaculis cursus ante at tincidunt. Etiam euismod sem
            vitae nunc
            mattis suscipit. Vestibulum ac sagittis dolor.
        </p>

    </main>
</body>

</html>